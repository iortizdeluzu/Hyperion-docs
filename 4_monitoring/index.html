<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="canonical" href="https://hyperion-docs.com/4_monitoring/">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Monitoring - Hyperion Documentation Webpage</title>
  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Monitoring";
    var mkdocs_page_input_path = "4_monitoring.md";
    var mkdocs_page_url = "/4_monitoring/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Hyperion Documentation Webpage</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../about/">About</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Training</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../1_introduction/">Introduction</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../2_workflow/">Workflow</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../3_first-job/">First Job</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Monitoring</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#squeue">squeue</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#example-1-viewing-all-jobs-in-a-specific-partition">Example 1: Viewing All Jobs in a Specific Partition</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example-2-viewing-jobs-in-specific-states">Example 2: Viewing Jobs in Specific States</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example-3-sorting-jobs">Example 3: Sorting Jobs</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example-4-showing-extended-job-information">Example 4: Showing Extended Job Information</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example-5-displaying-job-information-in-parsable-format">Example 5: Displaying Job Information in Parsable Format</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#sacct">sacct</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#sstat">sstat</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#seff">seff</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#scontrol">scontrol</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#sinfo">sinfo</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="" href="../5_contrains.md">Constrains</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../6_postrun/">Post Run</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../7_examples/">Examplex</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../8_advanced/">Advanced</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Hyperion Documentation Webpage</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Training &raquo;</li>
        
      
    
    <li>Monitoring</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="monitoring">Monitoring</h1>
<p>As we progress through our exploration of SLURM, we now approach an essential aspect of job management - monitoring. After you've submitted your job to the HPC cluster (like our Pi estimation job from the previous example), you'll want to track its status. Monitoring allows you to understand your job's progress, check its resource usage, and help identify any potential issues that could affect its successful completion.
SLURM provides several tools to assist you in job monitoring, including <code>squeue</code>, <code>sacct</code>, <code>sstat</code>, and <code>seff</code>. Let's dive into these commands, understand their usage, and see how we can leverage them for efficient job tracking.</p>
<p>Absolutely. Here's a more comprehensive version of the <code>squeue</code> section.</p>
<h2 id="squeue">squeue</h2>
<p>Think of <code>squeue</code> as your immediate source of information about your jobs. The <code>squeue</code> command displays information about jobs located in the SLURM scheduling queue. 
Let's say you've just submitted your Pi estimation job, and you're keen to check its status. Here's how to do it:</p>
<pre><code class="language-bash">squeue -u $USER
</code></pre>
<p>The <code>-u</code> flag followed by <code>$USER</code> allows you to filter the jobs belonging to your user. The output will be a table listing your jobs:</p>
<pre><code>  JOBID PARTITION     NAME     USER ST       TIME  NODES NODELIST(REASON)
123456     debug pi_estim  username  R       0:25      1 node007
</code></pre>
<p>Let's decipher the output:</p>
<ul>
<li><code>JOBID</code>: Unique identifier of your job in the SLURM system.</li>
<li><code>PARTITION</code>: The partition (or queue) where your job is placed.</li>
<li><code>NAME</code>: The name of your job.</li>
<li><code>USER</code>: The user who owns the job.</li>
<li><code>ST</code>: The state of your job (<code>R</code> signifies that the job is currently running).</li>
<li><code>TIME</code>: The time your job has been running.</li>
<li><code>NODES</code>: The number of nodes your job is using.</li>
<li><code>NODELIST(REASON)</code>: The specific node(s) your job is running on.</li>
</ul>
<p>If you wish to customize the display and show specific fields, you can use the <code>-o/--format</code> option. For example, to display the job ID, name, state, and the number of CPUs:</p>
<pre><code class="language-bash">squeue -u $USER -o &quot;%.10i %.9P %.8j %.8u %.2t %.6D&quot;
</code></pre>
<p>The format option <code>%.10i %.9P %.8j %.8u %.2t %.6D</code> is used to customize the output. Here's what each of these specifiers means:</p>
<ul>
<li><code>%.10i</code>: Job ID with a field width of 10 characters.</li>
<li><code>%.9P</code>: Partition name with a field width of 9 characters.</li>
<li><code>%.8j</code>: Job name with a field width of 8 characters.</li>
<li><code>%.8u</code>: User name with a field width of 8 characters.</li>
<li><code>%.2t</code>: Job state with a field width of 2 characters.</li>
<li><code>%.6D</code>: Number of nodes with a field width of 6 characters.</li>
</ul>
<p>Field width specifies the minimum number of characters to be printed. If the value to be printed is shorter than this number, the result is padded with blank spaces. The full list of available options can be found in the <a href="https://slurm.schedmd.com/squeue.html">SLURM documentation</a>.</p>
<p>With the <code>squeue</code> command, you can stay updated with the status and progress of your job in the scheduling queue. In the next section, we will explore <code>sacct</code> and <code>sstat</code> to get more detailed information about the resource usage of your job.</p>
<p>Sure, let's dive into more ways you can use <code>squeue</code> to monitor your jobs.</p>
<h3 id="example-1-viewing-all-jobs-in-a-specific-partition">Example 1: Viewing All Jobs in a Specific Partition</h3>
<p>If you want to view all jobs currently in a specific partition, you can use the <code>-p</code> or <code>--partition</code> option. For example, to view all jobs in the <code>regular</code> partition:</div></p>
<pre><code class="language-bash">squeue -p regular
</code></pre>
<p>This will show all jobs currently in the 'regular' partition, regardless of the user who submitted them.</p>
<h3 id="example-2-viewing-jobs-in-specific-states">Example 2: Viewing Jobs in Specific States</h3>
<p>You can use <code>squeue</code> to display jobs in specific states. This can be particularly useful when you want to see how many jobs are running, pending, or completed. Use the <code>-t</code> or <code>--states</code> option followed by the state:</p>
<pre><code class="language-bash">squeue -u $USER -t RUNNING
</code></pre>
<p>This command will show all your jobs currently running.</p>
<p>Here are all the job states you can query using the <code>-t</code> or <code>--states</code> option of <code>squeue</code>:</p>
<ul>
<li>
<p><code>PENDING</code> (or <code>PD</code>): Job is awaiting resource allocation. Your job might be pending because the resources it needs are not currently available, or it might be waiting in line due to job scheduling policies.</p>
</li>
<li>
<p><code>RUNNING</code> (or <code>R</code>): Job currently has an allocation and is running.</p>
</li>
<li>
<p><code>SUSPENDED</code> (or <code>S</code>): Job has an allocation, but execution has been suspended and CPU usage has been reduced to zero, often due to some system event.</p>
</li>
<li>
<p><code>COMPLETING</code> (or <code>CG</code>): Job is in the process of completing. Some processes of the job are still running.</p>
</li>
<li>
<p><code>COMPLETED</code> (or <code>CD</code>): Job has completed successfully.</p>
</li>
<li>
<p><code>CONFIGURING</code> (or <code>CF</code>): Job has been allocated resources, but are being configured for the job.</p>
</li>
<li>
<p><code>CANCELLED</code> (or <code>CA</code>): Job was explicitly cancelled by the user or system administrator. The job may or may not have been initiated.</p>
</li>
<li>
<p><code>FAILED</code> (or <code>F</code>): Job terminated with non-zero exit code or other failure condition.</p>
</li>
<li>
<p><code>TIMEOUT</code> (or <code>TO</code>): Job terminated upon reaching its time limit.</p>
</li>
<li>
<p><code>PREEMPTED</code> (or <code>PR</code>): Job was preempted by a higher priority job.</p>
</li>
<li>
<p><code>NODE_FAIL</code> (or <code>NF</code>): Job terminated due to failure of one or more allocated nodes.</p>
</li>
<li>
<p><code>REVOKED</code> (or <code>RV</code>): Sibling job was unable to allocate resources and was revoked.</p>
</li>
<li>
<p><code>SPECIAL_EXIT</code> (or <code>SE</code>): The job terminated in a condition that is interpreted as an exit code.</p>
</li>
</ul>
<h3 id="example-3-sorting-jobs">Example 3: Sorting Jobs</h3>
<p><code>squeue</code> can also sort jobs based on various attributes such as priority, job ID, time left, etc. For instance, to sort your jobs based on their remaining time in descending order, use the <code>--sort</code> option:</p>
<pre><code class="language-bash">squeue -u $USER --sort=-t
</code></pre>
<p>This will display your jobs in descending order of remaining time (<code>-t</code>). The <code>-</code> sign before <code>t</code> is used for descending order. Without it, the jobs would be sorted in ascending order.</p>
<p>These examples show the versatility of the <code>squeue</code> command and how it can be customized to get specific information about your jobs. Please remember to replace <code>$USER</code> with your username or keep it as is if you're running these commands directly in your terminal session. The full list of options is available in the <a href="https://slurm.schedmd.com/squeue.html">SLURM documentation</a>.</p>
<h3 id="example-4-showing-extended-job-information">Example 4: Showing Extended Job Information</h3>
<p>If you want to see more detailed information about a particular job, including its start time, estimated end time, and the nodes it's running on, you can use the <code>-l</code> or <code>--long</code> option. </p>
<pre><code>squeue -j 123456 --long
</code></pre>
<p>This command will display extended information about the job with ID 123456 (replace it with your job ID). The output might look like this:&lt;</p>
<pre><code>Tue May 23 10:15:39 2023
   JOBID PARTITION     NAME     USER ST       START        END  NODES NODELIST(REASON)
  123456     test  pi_estim    myuser  R 10:15:39 10:17:39      1 n0001
</code></pre>
<h3 id="example-5-displaying-job-information-in-parsable-format">Example 5: Displaying Job Information in Parsable Format</h3>
<p>For scripts or other automated tasks, you might want to obtain the job information in a parsable format. The <code>-h</code> or <code>--noheader</code> option can be used to suppress the header, and the <code>--Format</code> option allows you to specify the exact fields you need. For instance:</p>
<pre><code>squeue -j 123456 --noheader --Format=jobid,username,state
</code></pre>
<p>This will return a single line of output with the job ID, username, and state, separated by pipe characters. The output might look like:</p>
<pre><code>123456|myuser|RUNNING
</code></pre>
<p>In these examples, remember to replace <code>123456</code> with the ID of your job, and <code>myuser</code> with your username. The full list of format specifiers and options can be found in the <a href="https://slurm.schedmd.com/squeue.html">SLURM documentation</a>.</p>
<h2 id="sacct">sacct</h2>
<p>The <code>sacct</code> command provides accounting data for all jobs and job steps in the SLURM workload manager. It's a treasure trove of information about your job's performance, offering insights into resource usage and time spent on different stages.</p>
<p>To view the accounting data for a specific job, use the <code>-j</code> flag followed by the job id:</p>
<pre><code>sacct -j 123456 --format=JobID,JobName,MaxRSS,Elapsed
</code></pre>
<p>The <code>--format</code> option customizes the output, similar to the <code>squeue</code> command. In the above command, we are asking for the Job ID, Job Name, Maximum RSS memory used, and the Elapsed time of the job. A full list of available format options can be found in the <a href="https://slurm.schedmd.com/squeue.html">SLURM documentation</a>.</p>
<p>The output might look like this:</p>
<pre><code>       JobID    JobName     MaxRSS    Elapsed 
------------ ---------- ---------- ---------- 
123456           pi_estim   10000K   00:02:00
</code></pre>
<h2 id="sstat">sstat</h2>
<p><code>sstat</code> allows us to fetch the real-time status of a running job or step. This command gives us live updates on resource usage, which can be essential for optimizing your application.</p>
<p>To get real-time stats of your running job:</p>
<pre><code class="language-bash">sstat -j 123456 --format=JobID,AveCPU,AveRSS,AveVMSize
</code></pre>
<p>Again, the <code>--format</code> option allows us to customize the output. This command displays the Job ID, average CPU usage, average resident set size (RSS) memory, and average virtual memory size.</p>
<p>Here is a sample output:</p>
<pre><code>  JobID     AveCPU     AveRSS    AveVMSize
--------- ---------- ---------- -----------
123456    00:02:00   100.00MB    500.00MB
</code></pre>
<p>The full list of format options can be found in the <a href="https://slurm.schedmd.com/squeue.html">SLURM documentation</a>.</p>
<h2 id="seff">seff</h2>
<p><code>seff</code> provides a brief summary of the efficiency of your job. Although it's not part of the default SLURM installation, it's widely used due to its effectiveness.</p>
<pre><code class="language-bash">seff 123456
</code></pre>
<p>This command will return something like this:</p>
<pre><code>Job ID: 123456
Cluster: cluster_name
User/Group: user/group
State: COMPLETED (exit code 0)
Cores: 4
CPU Utilized: 00:08:00
CPU Efficiency: 100.00% of 00:08:00 core-walltime
Wall-clock time: 00:02:00
Memory Utilized: 100.00 MB
Memory Efficiency: 25.00% of 400.00 MB
</code></pre>
<p>This output provides an overall picture of how efficiently your job utilized the allocated resources, which can be crucial in optimizing your application for an HPC environment. The use of these commands will give you a good understanding of how your job is performing and where there might be room for improvement.</p>
<h2 id="scontrol">scontrol</h2>
<p><code>scontrol</code> is a utility provided by SLURM for administrative tasks, but it also has several functions that can be useful for users. One of these is the ability to display detailed information about a specific job. For example:</p>
<pre><code class="language-bash">scontrol show job 123456
</code></pre>
<p>This command will show a detailed description of the job with ID 123456, including the time it was submitted, its current state, the partition it's running in, the resources it's using, and many other details. </p>
<p>Here's a truncated example of what the output might look like:</p>
<pre><code>JobId=123456 JobName=pi_estim
   UserId=myuser(1000) GroupId=myuser(1000) MCS_label=N/A
   Priority=4294901496 Nice=0 Account=(null) QOS=(null)
   JobState=RUNNING Reason=None Dependency=(null)
   Requeue=1 Restarts=0 BatchFlag=1 Reboot=0 ExitCode=0:0
   ...
</code></pre>
<p>Note: The output of <code>scontrol show job</code> is quite long and has been truncated for brevity. To see all the information, run this command yourself with one of your job IDs.</p>
<h2 id="sinfo">sinfo</h2>
<p>While <code>sinfo</code> is more typically used to display information about nodes and partitions, it can also be used to monitor the resources being used by jobs in real-time. For example:</p>
<pre><code>sinfo -N -l
</code></pre>
<p>This command will display a long format list of all nodes, showing which nodes are allocated to which jobs, the state of each node, how much of its resources are being used, and other details.</p>
<p>Here's an example of what the output might look like:</p>
<pre><code>Tue May 23 10:15:39 2023
NODELIST   NODES PARTITION       STATE CPUS    S:C:T MEMORY TMP_DISK WEIGHT FEATURES REASON
n0001          1  regular*   allocated   24   2:12:1  64000    48000      1   (null) none
   JOBID PARTITION     NAME     USER ST       START        END  NODES NODELIST(REASON)
  123456   regular pi_estim    myuser  R 10:15:39 10:17:39      1 n0001
</code></pre>
<p>In this example, you can see that node <code>n0001</code> is allocated to job 123456, which is currently running. 
As always, remember to replace <code>123456</code> with your job ID and <code>myuser</code> with your username in these examples. And as always, the full list of options is available in the <a href="https://slurm.schedmd.com/squeue.html">SLURM documentation</a>.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../6_postrun/" class="btn btn-neutral float-right" title="Post Run">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../3_first-job/" class="btn btn-neutral" title="First Job"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../3_first-job/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../6_postrun/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
